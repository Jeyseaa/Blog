(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{1376:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/update-blog",function(){return n(192)}])},9552:function(e,t,n){"use strict";n.d(t,{J$:function(){return s},Vh:function(){return l},X4:function(){return o},zZ:function(){return a}});var r=n(3921);async function s(e,t){let n=(e-1)*t,s=n+t-1,{data:l,error:a,count:o}=await r.O.from("blogs").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(n,s);if(a)throw a;return{blogs:l||[],total:o||0}}async function l(e,t,n){let{data:s,error:l}=await r.O.from("blogs").insert([{title:e,content:t,user_id:n}]).select();if(l)throw l;return s[0]}async function a(e,t,n){let{data:s,error:l}=await r.O.from("blogs").update({title:t,content:n}).eq("id",e).select();if(l)throw l;return s[0]}async function o(e){let{error:t}=await r.O.from("blogs").delete().eq("id",e);if(t)throw t}},192:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893),s=n(7294),l=n(1163),a=n(9552),o=n(1649);function u(){let e=(0,l.useRouter)(),{id:t,title:n,content:u}=e.query,i=(0,o.v9)(e=>e.auth.user),[c,d]=(0,s.useState)(""),[f,b]=(0,s.useState)(""),[g,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{n&&d(n),u&&b(u)},[n,u]);let p=async()=>{if(!c||!f){h("Title and content are required");return}if(!i){h("You must be logged in to update a blog");return}x(!0),h(null);try{await (0,a.zZ)(Number(t),c,f),alert("Blog updated successfully"),e.push("/blogs")}catch(e){h(e.message)}finally{x(!1)}};return(0,r.jsxs)("div",{className:"max-w-3xl mx-auto mt-10 p-6 bg-white shadow-2xl rounded-2xl border border-gray-200",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"Update Blog"}),m&&(0,r.jsx)("p",{className:"text-red-600 mb-4 text-center font-medium",children:m}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-1",children:"Title"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),disabled:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-1",children:"Content"}),(0,r.jsx)("textarea",{value:f,onChange:e=>b(e.target.value),disabled:g,rows:10,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:p,disabled:g,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-semibold shadow-md transition duration-200",children:g?"Updating...":"Update Blog"})})]})]})}},1163:function(e,t,n){e.exports=n(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1376)}),_N_E=e.O()}]);